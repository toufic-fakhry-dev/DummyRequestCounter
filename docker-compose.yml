version: "3.9"

services:
  web:
    build: .
    container_name: dummy_web
    ports:
      - "8000:8000"                   # host:container (FastAPI on 8000)
    environment:
      APP_ENV: production             # optional
      REDIS_HOST: redis               # service name = DNS hostname
      REDIS_PORT: ${REDIS_PORT:-6379} # overridable
    depends_on:
      - redis

  redis:
    image: redis:7-alpine
    container_name: dummy_redis
    # (Part 1: no persistence yet; we'll add a volume in Part 2)
    ports:
      - "${REDIS_PORT:-6379}:6379"    # optional external access
